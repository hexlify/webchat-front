{"version":3,"sources":["components/Messenger/Components/Message/index.js","components/Messenger/Components/MessageList/index.js","components/Messenger/Components/ConversationListItem/index.js","components/Messenger/Components/ConversationList/index.js","components/Messenger/Components/MessageInput/index.js","service/AuthService.js","components/Messenger/Components/Logout/index.js","ApiContracts/ChatMessageRequest.js","ApiContracts/ChatMessage.js","components/withAuth.js","components/Messenger/index.js","components/Auth/signup.js","components/Auth/login.js","components/UserInfo/index.js","components/AdminConsole/Components/UserList.js","components/AdminConsole/Components/ChatRoomList.js","components/AdminConsole/index.js","components/Confirm/index.js","App.js","serviceWorker.js","index.js"],"names":["Message","className","this","props","isMine","author","text","Component","MessageList","messagesEndRef","React","createRef","scrollToBottom","bind","current","scrollIntoView","behavior","messages","map","message","i","key","sender","content","ref","ConversationListItem","name","description","onClick","length","slice","ConversationList","onItemChoice","conversationId","e","chooseConversation","conversations","c","id","MessageInput","state","onChange","onSubmit","onKeyPress","preventDefault","setState","target","value","onSubmitMessage","TextField","placeholder","autoFocus","Button","variant","color","domain","fetch","login","getUserInfo","username","password","method","body","JSON","stringify","then","res","saveUserInfo","Promise","resolve","email","token","getToken","isTokenExpired","decode","exp","Date","now","err","userInfo","localStorage","setItem","parse","getItem","removeItem","path","options","url","headers","loggedIn","resp","_checkStatus","json","response","status","logOut","error","Error","LogoutButton","navigate","logout","AuthService","onLogout","to","ChatMessageRequest","type","chatRoomId","ChatMessage","withAuth","AuthComponent","roles","info","catch","console","log","history","replace","isAdmin","some","x","subscription","onConnected","onError","disconnect","sendMessage","onMessageReceived","onChatRoomSelected","socket","SockJS","client","Stomp","over","connect","unsubscribe","chatMessages","m","Array","from","subscribe","chatMessageRequest","chatMessage","send","payload","rooms","Toolbar","Typography","href","Logout","Signup","handleChange","handleSubmit","register","alert","htmlFor","Link","Login","firstName","AdminConsole","users","userId","simpleFetch","_","find","rowData","icon","tooltip","banUser","activateUser","columns","title","field","editable","render","r","join","data","sort","a","b","actions","getActionButton","ChatRoomList","chatRooms","onRowDelete","oldData","reject","index","indexOf","splice","onRowUpdate","newData","onRowAdd","push","UserList","Confirm","match","params","CircularProgress","disableShrink","App","exact","component","UserInfo","Messenger","Boolean","window","location","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ead7dbdf.chunk.js","sourcesContent":["import React, {Component} from 'react'\n\nimport './Message.css'\n\n\nclass Message extends Component {\n    render() {\n        return (\n            <div className={`message${this.props.isMine ? ' mine' : ''}`}>\n                <div className=\"author-content\">\n                    {this.props.isMine ? '' : this.props.author}\n                </div>\n                <div className='message-content'>\n                    {this.props.text}\n                </div>\n            </div>\n        );\n    }\n}\n\n\nexport default Message;","import React, {Component} from 'react'\nimport Message from '../Message'\n\nimport './MessageList.css'\n\n\nclass MessageList extends Component {\n      constructor(props) {\n        super(props);\n\n        this.messagesEndRef = React.createRef();\n        this.scrollToBottom = this.scrollToBottom.bind(this);\n    }\n\n    scrollToBottom() {\n      this.messagesEndRef.current.scrollIntoView({behavior: 'smooth'});\n    }\n\n    componentDidMount() {\n      this.scrollToBottom();\n    }\n\n    componentDidUpdate() {\n      this.scrollToBottom();\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"message-list-container\">\n                    {this.props.messages.map((message, i) => <Message key={i} isMine={message.isMine} author={message.sender} text={message.content}/>)}\n                </div>\n\n                <div ref={this.messagesEndRef}>\n\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default MessageList;","import React from 'react'\r\n\r\nimport './ConversationListItem.css'\r\n\r\n\r\nfunction ConversationListItem(props) {\r\n    let {name, description, onClick} = props;\r\n    if (name.length > 25) {\r\n        name = name.slice(0, 22) + '...';\r\n    }\r\n    if (description.length > 25) {\r\n        description = description.slice(0, 22) + '...';\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"conversation-list-item\" onClick={onClick}>\r\n            <h1 className=\"conversation-title\">{name}</h1>\r\n            <p className=\"conversation-desciption\">{description}</p>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default ConversationListItem;","import React, {Component} from 'react';\r\nimport ConversationListItem from '../ConversationListItem'\r\n\r\nimport './ConversationList.css'\r\n\r\n\r\nclass ConversationList extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onItemChoice = this.onItemChoice.bind(this);\r\n    }\r\n\r\n    onItemChoice(conversationId, e) {\r\n        this.props.chooseConversation(conversationId)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"conversation-list\">\r\n                {\r\n                    this.props.conversations.map(c =>\r\n                        <ConversationListItem\r\n                            key={c.id}\r\n                            name={c.name}\r\n                            description={c.description}\r\n                            onClick={(e) => this.onItemChoice(c.id, e)}\r\n                        />)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default ConversationList;","import React, {Component} from 'react'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\n\nimport './MessageInput.css'\n\n\nclass MessageInput extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {message: ''};\n\n        this.onChange = this.onChange.bind(this);\n        this.onSubmit = this.onSubmit.bind(this);\n        this.onKeyPress = this.onKeyPress.bind(this);\n    }\n\n    onChange(e) {\n        e.preventDefault();\n        this.setState({message: e.target.value});\n    }\n\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            this.onSubmit(e);\n        }\n    }\n\n    onSubmit(e) {\n        if (this.state.message) {\n            this.props.onSubmitMessage(this.state.message);\n            this.setState({message: ''});\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"compose\">\n                <TextField\n                    id=\"message-input\"\n                    className=\"compose-input\"\n                    placeholder=\"Write message here...\"\n                    value={this.state.message}\n                    onChange={this.onChange}\n                    onKeyPress={this.onKeyPress}\n                    autoFocus\n                />\n                <Button variant=\"contained\" color=\"primary\" className=\"submit-button\" onClick={this.onSubmit}>Send</Button>\n            </div>\n        );\n    }\n}\n\n\nexport default MessageInput;","import decode from 'jwt-decode';\r\n\r\n\r\nclass AuthService {\r\n\r\n    constructor(domain) {\r\n        this.domain = domain || 'http://localhost:8000';\r\n        this.fetch = this.fetch.bind(this);\r\n        this.login = this.login.bind(this);\r\n        this.getUserInfo = this.getUserInfo.bind(this);\r\n    }\r\n\r\n    login(username, password) {\r\n        return this.fetch(`/auth/login`, {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                username: username,\r\n                password: password\r\n            })\r\n        }).then(res => {\r\n            this.saveUserInfo(res);\r\n            return Promise.resolve(res);\r\n        })\r\n    }\r\n\r\n    register(username, email, password) {\r\n        return this.fetch('/auth/register', {\r\n            method: 'POST',\r\n            body: JSON.stringify({\r\n                username: username,\r\n                password: password,\r\n                email: email\r\n            })\r\n        });\r\n    }\r\n\r\n    loggedIn() {\r\n        const token = this.getToken();\r\n        return !!token && !this.isTokenExpired(token);\r\n    }\r\n\r\n    isTokenExpired(token) {\r\n        try {\r\n            const decoded = decode(token);\r\n            return decoded.exp < Date.now() / 1000;\r\n        } catch (err) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    saveUserInfo(userInfo) {\r\n        localStorage.setItem('userInfo', JSON.stringify(userInfo));\r\n    }\r\n\r\n    getUserInfo() {\r\n        return JSON.parse(localStorage.getItem('userInfo'));\r\n    }\r\n\r\n    getToken() {\r\n        const userInfo = this.getUserInfo();\r\n        if (userInfo == null) {\r\n            return null;\r\n        }\r\n        return this.getUserInfo().token;\r\n    }\r\n\r\n    logOut() {\r\n        localStorage.removeItem(\"userInfo\");\r\n    }\r\n\r\n    simpleFetch(path, options) {\r\n        const url = this.domain + path;\r\n        const headers = {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json;charset=UTF-8'\r\n        };\r\n\r\n        if (this.loggedIn()) {\r\n            headers['Authorization'] = 'Bearer ' + this.getToken();\r\n        }\r\n\r\n        return fetch(url, {\r\n            headers,\r\n            ...options\r\n        })\r\n            .then(resp => this._checkStatus(resp))\r\n    }\r\n\r\n    fetch(path, options) {\r\n        const url = this.domain + path;\r\n        const headers = {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json;charset=UTF-8'\r\n        };\r\n\r\n        if (this.loggedIn()) {\r\n            headers['Authorization'] = 'Bearer ' + this.getToken();\r\n        }\r\n\r\n        return fetch(url, {\r\n            headers,\r\n            ...options\r\n        })\r\n            .then(resp => this._checkStatus(resp))\r\n            .then(resp => resp.json());\r\n    }\r\n\r\n    async _checkStatus(response) {\r\n        if (response.status >= 200 && response.status < 300) {\r\n            return response\r\n        }\r\n        if (response.status === 403) {\r\n            this.logOut();\r\n        }\r\n\r\n        const message = (await response.json()).message;\r\n        const error = new Error(response.status + ':  ' + message);\r\n        error.response = response;\r\n        throw error;\r\n    }\r\n}\r\n\r\n\r\nexport default new AuthService('https://webchat-backend.herokuapp.com');","import React, {Component} from \"react\";\r\nimport AuthService from \"../../../../service/AuthService\";\r\nimport {Redirect} from \"react-router-dom\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\n\r\nclass LogoutButton extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            navigate: false\r\n        };\r\n\r\n        this.logout = this.logout.bind(this);\r\n    }\r\n\r\n    logout() {\r\n        AuthService.logOut();\r\n        this.props.onLogout();\r\n        this.setState({navigate: true});\r\n    }\r\n\r\n    render() {\r\n        const {navigate} = this.state;\r\n        if (navigate) {\r\n            return <Redirect to=\"/login\" />\r\n        }\r\n        return <Button variant=\"contained\" color=\"secondary\" onClick={this.logout}>Logout</Button>\r\n    }\r\n}\r\n\r\nexport default LogoutButton;","class ChatMessageRequest {\n    constructor(content, type, chatRoomId) {\n        this.content = content;\n        this.type = type;\n        this.chatRoomId = chatRoomId;\n    }\n}\n\nexport default ChatMessageRequest;","class ChatMessage {\n    constructor(sender, content, isMine) {\n        this.sender = sender;\n        this.content = content;\n        this.isMine = isMine;\n    }\n}\n\nexport default ChatMessage;","import React, {Component} from 'react';\r\nimport AuthService from '../service/AuthService';\r\n\r\n\r\nexport default function withAuth(AuthComponent) {\r\n    return class AuthWrapped extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n\r\n            this.state = {\r\n                username: null,\r\n                roles: []\r\n            }\r\n        }\r\n\r\n        componentDidMount() {\r\n            if (!AuthService.loggedIn()) {\r\n                this.props.history.replace('/login');\r\n            } else {\r\n                AuthService\r\n                    .fetch('/user')\r\n                    .then(info => this.setState({username: info.username, roles: info.roles}))\r\n                    .catch(e => console.log(e));\r\n            }\r\n        }\r\n\r\n        render() {\r\n            if (this.state.username) {\r\n                return (\r\n                    <AuthComponent\r\n                        history={this.props.history}\r\n                        username={this.state.username}\r\n                        isAdmin={this.state.roles.some(x => x.name === 'ROLE_ADMIN')}\r\n                    />\r\n                )\r\n            } else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n}","import React, {Component} from 'react';\nimport SockJS from 'sockjs-client';\nimport Stomp from 'stompjs'\n\nimport MessageList from './Components/MessageList';\nimport ConversationList from './Components/ConversationList';\nimport MessageInput from './Components/MessageInput';\nimport LogoutButton from './Components/Logout';\nimport AuthService from \"../../service/AuthService\";\nimport ChatMessageRequest from '../../ApiContracts/ChatMessageRequest';\nimport ChatMessage from '../../ApiContracts/ChatMessage';\nimport withAuth from '../withAuth'\n\n\nimport './Messenger.css';\nimport {Toolbar, Typography} from \"@material-ui/core/\";\nimport Button from \"@material-ui/core/Button\";\n\nclass Messenger extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            subscription: null,\n            chatRoomId: null,\n            messages: [],\n            conversations: []\n        };\n        this.username = this.props.username;\n\n        this.onConnected = this.onConnected.bind(this);\n        this.onError = this.onError.bind(this);\n        this.disconnect = this.disconnect.bind(this);\n\n        this.sendMessage = this.sendMessage.bind(this);\n        this.onMessageReceived = this.onMessageReceived.bind(this);\n        this.onChatRoomSelected = this.onChatRoomSelected.bind(this);\n\n        const socket = new SockJS('https://webchat-backend.herokuapp.com/ws');\n        this.client = Stomp.over(socket);\n        this.client.connect({'Authorization': `Bearer ${AuthService.getToken()}`}, this.onConnected, this.onError);\n    }\n\n    onConnected() {\n        // const joinChatMessageRequest = new ChatMessageRequest('', 'JOIN', this.chatRoomId);\n        // this.client.send(\n        //     '/app/chat/addUser',\n        //     {},\n        //     JSON.stringify(joinChatMessageRequest)\n        // );\n    }\n\n    onError(error) {\n        console.log(error);\n    }\n\n    onChatRoomSelected(conversationId) {\n        const {subscription} = this.state;\n        if (subscription !== null) {\n            subscription.unsubscribe();\n        }\n\n        AuthService.fetch('/room/' + conversationId)\n            .then(resp => resp.chatMessages.map((m, i) => new ChatMessage(m.sender, m.content, m.sender === this.username)))\n            .then(messages => this.setState(\n                {\n                    messages: Array.from(messages),\n                    chatRoomId: conversationId,\n                    subscription: this.client.subscribe(`/topic/room/${conversationId}`, this.onMessageReceived)\n                })\n            )\n            .catch(e => console.log(e.message));\n    }\n\n    sendMessage(text) {\n        const {subscription, chatRoomId} = this.state;\n\n        if (subscription === null) {\n            return;\n        }\n\n        let chatMessageRequest = new ChatMessageRequest(text, 'CHAT', this.state.chatRoomId);\n        let chatMessage = new ChatMessage(this.username, text, true);\n\n        this.client.send(`/chat/sendMessage/${chatRoomId}`, {}, JSON.stringify(chatMessageRequest));\n\n        this.setState({\n            messages: [...this.state.messages, chatMessage]\n        });\n    }\n\n    onMessageReceived(payload) {\n        let chatMessageRequest = JSON.parse(payload.body);\n        let chatMessage = new ChatMessage(chatMessageRequest.sender, chatMessageRequest.content, false);\n\n        if (chatMessage.sender === this.username) {\n            return;\n        }\n\n        if (chatMessage.type === 'JOIN') {\n            chatMessage.content = 'Entered the room';\n        }\n\n        if (chatMessage.type === 'LEAVE') {\n            chatMessage.content = 'Left the room';\n        }\n\n        this.setState({\n            messages: [...this.state.messages, chatMessage]\n        })\n    }\n\n    componentDidMount() {\n        AuthService.fetch('/room')\n            .then(rooms => this.setState({conversations: rooms}))\n            .catch(e => console.log(e.message));\n    }\n\n    disconnect() {\n        this.client.disconnect();\n    }\n\n    render() {\n        return (\n            <div className=\"messenger\">\n                <div className=\"top-bar\">\n                    <Toolbar>\n                        <Typography variant=\"h6\" className=\"app-header\">\n                            Webchat\n                        </Typography>\n\n                        {this.props.isAdmin &&\n                            <Button variant=\"contained\" color=\"default\" href=\"/admin\">Admin console</Button>\n                        }\n\n                        <Button variant=\"contained\" color=\"primary\" href=\"/me\">{this.username}</Button>\n                        <LogoutButton onLogout={this.disconnect} />\n                    </Toolbar>\n                </div>\n\n                <div className=\"scrollable left-sidebar\">\n                    <ConversationList\n                        conversations={this.state.conversations}\n                        chooseConversation={this.onChatRoomSelected}/>\n                </div>\n\n                <div className=\"scrollable content\">\n                    <MessageList messages={this.state.messages}/>\n                </div>\n\n                <div className=\"bottom-bar\">\n                    <MessageInput onSubmitMessage={this.sendMessage}/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default withAuth(Messenger);","import React, {Component} from 'react';\r\n\r\nimport './Auth.css';\r\nimport AuthService from \"../../service/AuthService\";\r\nimport {Link} from \"@material-ui/core\";\r\n\r\n\r\nclass Signup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            email: '',\r\n            password: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        });\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (AuthService.loggedIn()) {\r\n            this.props.history.replace('/');\r\n        }\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        AuthService\r\n            .register(this.state.username, this.state.email, this.state.password)\r\n            .then(() => this.props.history.replace('/login'))\r\n            .catch(e => alert(e.message.message));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form className=\"signup-form\" onSubmit={this.onSubmit}>\r\n                    <ul>\r\n                        <li>\r\n                            <label htmlFor=\"username\">Username</label>\r\n                            <input\r\n                                id=\"username\"\r\n                                placeholder=\"Username\"\r\n                                value={this.state.username}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </li>\r\n\r\n                        <li>\r\n                            <label htmlFor=\"email\">Email</label>\r\n                            <input\r\n                                id=\"email\"\r\n                                type=\"email\"\r\n                                placeholder=\"Email\"\r\n                                value={this.state.email}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </li>\r\n\r\n                        <li>\r\n                            <label htmlFor=\"password\">Password</label>\r\n                            <input\r\n                                id=\"password\"\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </li>\r\n\r\n                        <li>\r\n                            <button\r\n                                type=\"submit\"\r\n                                onClick={this.handleSubmit}\r\n                            >Signup\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n                </form>\r\n\r\n                <p>\r\n                    Already have an account? Login <Link href=\"/login\">here</Link>\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signup;","import React, {Component} from 'react';\r\nimport AuthService from '../../service/AuthService';\r\n\r\nimport './Auth.css';\r\nimport {Link} from \"@material-ui/core\";\r\n\r\n\r\nclass Login extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            username: '',\r\n            password: '',\r\n            message: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.login = this.login.bind(this);\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({\r\n            [e.target.id]: e.target.value\r\n        });\r\n    }\r\n\r\n    async login(e) {\r\n        this.setState({message: ''});\r\n        e.preventDefault();\r\n\r\n        AuthService.login(this.state.username, this.state.password)\r\n            .then(res => {\r\n                this.props.history.replace('/')\r\n            })\r\n            .catch(e => alert(e.message))\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (AuthService.loggedIn()) {\r\n            this.props.history.replace('/');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <form className=\"signup-form\" onSubmit={this.onSubmit}>\r\n                    {this.state.message}\r\n                    <ul>\r\n                        <li>\r\n                            <label htmlFor=\"username\">Username</label>\r\n                            <input\r\n                                id=\"username\"\r\n                                placeholder=\"Username\"\r\n                                value={this.state.username}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </li>\r\n\r\n                        <li>\r\n                            <label htmlFor=\"password\">Password</label>\r\n                            <input\r\n                                id=\"password\"\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </li>\r\n\r\n                        <li>\r\n                            <button\r\n                                onClick={this.login}\r\n                            >Login\r\n                            </button>\r\n                        </li>\r\n                    </ul>\r\n                </form>\r\n                <p>\r\n                    Haven't got an account? Register <Link href=\"/signup\">here</Link>\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Login;","import React, {Component} from 'react';\r\nimport withAuth from '../withAuth';\r\nimport AuthService from \"../../service/AuthService\";\r\n\r\nimport './UserInfo.css'\r\n\r\n\r\nclass UserInfo extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n\r\n        this.state = {\r\n            username: '',\r\n            firstName: '',\r\n            email: ''\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        AuthService.fetch('/user')\r\n            .then(info => {\r\n                this.setState({...info})\r\n            })\r\n            .catch(e => console.log(e.message))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"userinfo\">\r\n                <div className=\"userinfo-line\">\r\n                    <div className=\"label-container\">\r\n                        <label>Email</label>\r\n                    </div>\r\n                    <div className=\"value-container\">\r\n                        <label>{this.state.email}</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"userinfo-line\">\r\n                    <div className=\"label-container\">\r\n                        <label>Username</label>\r\n                    </div>\r\n                    <div className=\"value-container\">\r\n                        <label>{this.state.username}</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"userinfo-line\">\r\n                    <div className=\"label-container\">\r\n                        <label>First name</label>\r\n                    </div>\r\n                    <div className=\"value-container\">\r\n                        <label>{this.state.firstName}</label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withAuth(UserInfo);","import React, {Component} from \"react\";\r\nimport AuthService from \"../../../service/AuthService\";\r\nimport MaterialTable from \"material-table\";\r\n\r\n\r\nclass AdminConsole extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            users: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        AuthService.fetch('/admin/users')\r\n            .then(users => this.setState({users: users}))\r\n            .catch(e => console.log(e.message));\r\n    }\r\n\r\n    banUser(userId) {\r\n        AuthService.simpleFetch(`/admin/ban/${userId}`)\r\n            .then(_ => this.setState(state => {\r\n                let bannedUser = state.users.find(x => x.id === userId);\r\n                bannedUser.status = 'BANNED';\r\n\r\n                return state;\r\n            }))\r\n            .catch(e => alert(e.message));\r\n    }\r\n\r\n    activateUser(userId) {\r\n        AuthService.simpleFetch(`/admin/activate/${userId}`)\r\n            .then(_ => this.setState(state => {\r\n                let activatedUser = state.users.find(x => x.id === userId);\r\n                activatedUser.status = 'ACTIVE';\r\n\r\n                return state;\r\n            }))\r\n            .catch(e => alert(e.message));\r\n    }\r\n\r\n    getActionButton(rowData) {\r\n        return rowData.status === 'ACTIVE'\r\n            ?\r\n            {\r\n                icon: 'block',\r\n                tooltip: 'Ban user',\r\n                onClick: (e, rowData) => this.banUser(rowData.id)\r\n            } :\r\n\r\n            {\r\n                icon: 'replay',\r\n                tooltip: 'Unban user',\r\n                onClick: (e, rowData) => this.activateUser(rowData.id)\r\n            };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MaterialTable\r\n                columns={[\r\n                    {title: \"Id\", field: \"id\", editable: \"never\"},\r\n                    {title: \"Username\", field: \"username\"},\r\n                    {title: \"FirstName\", field: \"firstName\"},\r\n                    {title: \"Email\", field: \"email\"},\r\n                    {title: \"Status\", field: \"status\"},\r\n                    {\r\n                        title: \"Roles\",\r\n                        field: \"roles\",\r\n                        render: rowData => rowData.roles\r\n                            .map(r => r.name === 'ROLE_ADMIN' ? 'ADMIN' : 'USER')\r\n                            .join(',')\r\n                    },\r\n                ]}\r\n                data={this.state.users.sort((a, b) => a.id > b.id)}\r\n                title=\"Users\"\r\n\r\n                actions={[rowData => this.getActionButton(rowData)]}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default AdminConsole;","import React, {Component} from \"react\";\r\nimport AuthService from \"../../../service/AuthService\";\r\nimport MaterialTable from \"material-table\";\r\n\r\nclass ChatRoomList extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            chatRooms: []\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        AuthService.fetch('/room')\r\n            .then(rooms => this.setState({chatRooms: rooms}))\r\n            .catch(e => console.log(e.message));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <MaterialTable\r\n                columns={[\r\n                    {title: \"Id\", field: \"id\", editable: \"never\"},\r\n                    {title: \"Name\", field: \"name\"},\r\n                    {title: \"Description\", field: \"description\"},\r\n                ]}\r\n                data={this.state.chatRooms}\r\n                editable={{\r\n                    onRowDelete: oldData =>\r\n                        new Promise(((resolve, reject) => {\r\n                            AuthService.simpleFetch(`/room/${oldData.id}`, {method: 'DELETE'})\r\n                                .then(_ => {\r\n                                    let chatRooms = this.state.chatRooms;\r\n                                    const index = chatRooms.indexOf(oldData);\r\n                                    chatRooms.splice(index, 1);\r\n                                    this.setState({chatRooms}, () => resolve());\r\n                                })\r\n                                .catch(e => {\r\n                                    alert(e.message)\r\n                                    reject();\r\n                                })\r\n                        })),\r\n                    onRowUpdate: (newData, oldData) =>\r\n                        new Promise(((resolve, reject) => {\r\n                            AuthService.simpleFetch(`/room/${oldData.id}`, {\r\n                                method: 'PUT',\r\n                                body: JSON.stringify({\r\n                                    name: newData.name,\r\n                                    description: newData.description\r\n                                })\r\n                            })\r\n                                .then(_ => {\r\n                                    const chatRooms = this.state.chatRooms;\r\n                                    const index = chatRooms.indexOf(oldData);\r\n                                    chatRooms[index] = newData;\r\n                                    this.setState({chatRooms}, () => resolve());\r\n                                })\r\n                                .catch(e => {\r\n                                    alert(e.message);\r\n                                    reject();\r\n                                })\r\n                        })),\r\n                    onRowAdd: newData =>\r\n                        new Promise(((resolve, reject) => {\r\n                            AuthService.simpleFetch('/room/create', {\r\n                                method: 'POST',\r\n                                body: JSON.stringify({\r\n                                    name: newData.name,\r\n                                    description: newData.description\r\n                                })\r\n                            })\r\n                                .then(_ => {\r\n                                    const chatRooms = this.state.chatRooms;\r\n                                    chatRooms.push(newData);\r\n                                    this.setState({chatRooms}, () => resolve());\r\n                                })\r\n                                .catch(e => {\r\n                                    alert(e.message);\r\n                                    reject();\r\n                                })\r\n                        }))\r\n                }}\r\n                title=\"Chatrooms\"\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default ChatRoomList;","import React, {Component} from \"react\";\r\nimport withAuth from \"../withAuth\";\r\nimport UserList from \"./Components/UserList\";\r\n\r\nimport './AdminConsole.css'\r\nimport ChatRoomList from \"./Components/ChatRoomList\";\r\n\r\nclass AdminConsole extends Component {\r\n\r\n    componentDidMount() {\r\n        if (!this.props.isAdmin) {\r\n            this.props.history.replace('/');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <ChatRoomList/>\r\n                <UserList/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withAuth(AdminConsole);","import React, {Component} from 'react'\r\nimport AuthService from \"../../service/AuthService\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\n\r\n\r\nclass Confirm extends Component {\r\n\r\n    componentDidMount() {\r\n        const {token} = this.props.match.params;\r\n\r\n        AuthService.simpleFetch(`/email/confirm/${token}`)\r\n            .then(_ => this.props.history.replace('/'))\r\n            .catch(err => alert(err.message))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <CircularProgress disableShrink/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default Confirm;","import React from 'react';\nimport {BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\nimport Messenger from './components/Messenger'\nimport Signup from \"./components/Auth/signup\";\nimport Login from \"./components/Auth/login\";\nimport UserInfo from './components/UserInfo'\nimport AdminConsole from './components/AdminConsole'\nimport Confirm from \"./components/Confirm\";\n\nimport './App.css';\n\nfunction App() {\n    return (\n        <Router>\n            <Switch>\n                <Route exact path=\"/login\" component={Login}/>\n                <Route exact path=\"/signup\" component={Signup}/>\n                <Route exact path=\"/me\" component={UserInfo}/>\n                <Route exact path=\"/admin\" component={AdminConsole}/>\n                <Route exact path=\"/confirm/:token\" component={Confirm}/>>\n                <Route exact path=\"/\" component={Messenger}/>\n            </Switch>\n        </Router>\n    )\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}